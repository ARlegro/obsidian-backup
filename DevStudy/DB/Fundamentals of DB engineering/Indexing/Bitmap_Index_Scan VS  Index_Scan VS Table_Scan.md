
> DBì—ì„œ ë°ì´í„°ë¥¼ ì½ì–´ì˜¤ëŠ” ë°©ì‹ì€ í¬ê²Œ 3ê°€ì§€ë¡œ ë‚˜ë‰  ìˆ˜ ìˆë‹¤.
> íš¨ìœ¨ì ì¸ ë°ì´í„° ì ‘ê·¼ì€ ì¿¼ë¦¬ ì„±ëŠ¥ì— ì§ì ‘ì ì¸ ì˜í–¥ì„ ë¯¸ì¹˜ë¯€ë¡œ ê° ìŠ¤ìº” ë°©ì‹ì˜ ì´í•´ëŠ” ë§¤ìš° ì¤‘ìš”


## ê°œë… ì •ë¦¬ 

### 1. Index Scan 

#### ê°œë… 
- DBì˜ ì¸ë±ìŠ¤ë¥¼ í™œìš©í•˜ì—¬ ì›í•˜ëŠ” ë°ì´í„°ë¥¼ ì°¾ì•„ë‚´ëŠ” ë°©ì‹
- íŠ¹ì • ê°’ì´ ì €ì¥ëœ ë ˆì½”ë“œì˜ ë¬¼ë¦¬ì  ìœ„ì¹˜(Row_ID, Page)ë¥¼ ê°–ê³  ìˆë‹¤.

#### ì›ë¦¬ 
1. **ì¸ë±ìŠ¤ ê²€ìƒ‰** : ì¿¼ë¦¬ ì¡°ê±´ì— í•´ë‹¹í•˜ëŠ” ê°’ì„ ì¸ë±ìŠ¤ì—ì„œ ê²€ìƒ‰ 
2. **ROWID íšë“** : í•´ë‹¹ ê°’ì´ ë§¤í•‘ëœ ë°ì´í„° ë ˆì½”ë“œì˜ ë¬¼ë¦¬ì  ì£¼ì†Œ(ROWID)íšë“
3. **í…Œì´ë¸” ì ‘ê·¼** : 2ë²ˆì—ì„œ íšë“í•œ ROWIDë¥¼ ì‚¬ìš©í•˜ì—¬ ì‹¤ì œ í…Œì´ë¸”ì— ì ‘ê·¼í•´ì„œ í•´ë‹¹ ë ˆì½”ë“œë¥¼ ì§ì ‘ ì°¾ì•„ ì½ì–´ì˜´ 

#### ì¥ë‹¨ì  
**âœ…ì¥ì ** 
- **ë¹ ë¥¸ ì†ë„** 
	- ì ì€ ì–‘ì˜ ë°ì´í„°ë¥¼ ê²€ìƒ‰í•  ë•Œ ë§¤ìš° ë¹ ë¥´ë‹¤
	- ì´ìœ  : ì¸ë±ìŠ¤ê°€ íŠ¹ì • ì¹¼ëŸ¼ì— ëŒ€í•´ ì •ë ¬ë˜ì–´ ìˆê³ , ì‹¤ì œ ë°ì´í„°ë¥¼ ì§ì ‘ ì°¾ì•„ê°€ê¸° ë•Œë¬¸
	  
- **ë¶€ë¶„ ë²”ìœ„ ì²˜ë¦¬** 
	- ë²”ìœ„ ë°ì´í„° ê²€ìƒ‰ ì‹œ ì¸ë±ìŠ¤ì˜ ì •ë ¬ëœ íŠ¹ì„±ì„ í™œìš©í•˜ì—¬ íš¨ìœ¨ì ìœ¼ë¡œ ì²˜ë¦¬

**ğŸ’¢ ë‹¨ì **
- **ì¶”ê°€ ì €ì¥ ê³µê°„ å¿…** 
	- ì¸ë±ìŠ¤ ìì²´ë¥¼ ìœ ì§€í•˜ê³  ê´€ë¦¬í•˜ëŠ” ë° ì¶”ê°€ì ì¸ ì €ì¥ ê³µê°„ í•„ìš” 
- **ì˜¤ë²„í—¤ë“œ**
	- DML(INSERT, UPDATE, DELETE) ì‘ì—… ì‹œ ì˜¤ë²„í—¤ë“œê°€ ë°œìƒ
- **ëœë¤ I/O**ë¡œ ì˜¤íˆë ¤ ì†ë„ê°€ ë” ëŠë¦´ ìˆ˜ë„ 



### 2. Table Scan
aka Full-Table-Scan, Seq Scan
#### ê°œë… 
- ì¸ë±ìŠ¤ë¥¼ ì‚¬ìš©í•˜ì§€ ì•Šê³ , í…Œì´ë¸”ì— ìˆëŠ” ëª¨ë“  ë°ì´í„°ë¥¼ ì²˜ìŒë¶€í„° ëê¹Œì§€ ì½ì–´ë“¤ì´ëŠ” ë°©ì‹

#### ì‘ë™ ë°©ì‹ 
- **Full Scan** : ë°ì´í„°ë² ì´ìŠ¤ê°€ í•´ë‹¹ í…Œì´ë¸”ì´ ì €ì¥ëœ ë””ìŠ¤í¬ ë¸”ë¡ì„ ì²˜ìŒë¶€í„° ìˆœì°¨ì ìœ¼ë¡œ ì½ì–´ë‚˜ê°‘ë‹ˆë‹¤.
- **ì¡°ê±´ ê²€ì‚¬** : ì½ì–´ì˜¨ ê° ë ˆì½”ë“œì— ëŒ€í•´ ì¿¼ë¦¬ì˜ ì¡°ê±´(WHERE ì ˆ)ì„ í•˜ë‚˜ì”© ë¹„êµí•˜ë©° ë§Œì¡±í•˜ëŠ” ë ˆì½”ë“œë§Œ í•„í„°ë§

#### ì¥ë‹¨ì 
**âœ…ì¥ì ** 
- ê°„ë‹¨í•¨ 
- í…Œì´ë¸” ëŒ€ë¶€ë¶„ì„ ìŠ¤ìº”í•´ì•¼í•˜ëŠ” ê²½ìš°ì—ëŠ” ì˜¤íˆë ¤ Table Scanì´ íš¨ìœ¨ì ì¼ ìˆ˜ ìˆìŒ 
	- ì‹¬ì§€ì–´ ë³‘ë ¬ ì¿¼ë¦¬ ì‹œ í…Œì´ë¸” ìŠ¤ìº” ë¹ ë¦„ 

**ğŸ’¢ë‹¨ì ** 
- íŠ¹ì • ì†ŒëŸ‰ì˜ ë°ì´í„°ë¥¼ ì°¾ì„ ë•Œ ë§¤ìš° ë¹„íš¨ìœ¨
	- í•„ìš”í•œ ë ˆì½”ë“œê°€ ëª‡ ê°œ ë˜ì§€ ì•Šë”ë¼ë„ ì „ì²´ í…Œì´ë¸”ì„ ë‹¤ ì½ì–´ì•¼ í•˜ê¸° ë•Œë¬¸

### 3. Bitmap Index Scan 
> ì—¬ëŸ¬ ë³´ì¡° ì¸ë±ìŠ¤ë¥¼ í™œìš©í•˜ì—¬ ì¿¼ë¦¬ë¥¼ ìµœì í™”í•˜ëŠ” ê³ ê¸‰ ê¸°ìˆ 

#### ê°œë… 
- **ë¹„íŠ¸ë§µ ì¸ë±ìŠ¤**ë¼ëŠ” íŠ¹ìˆ˜í•œ ì¸ë±ìŠ¤ë¥¼ í™œìš©í•˜ëŠ” ë°©ì‹
- ì—¬ëŸ¬ ì¸ë±ìŠ¤ ì¡°ê±´ì„ AND/ORë¡œ ê²°í•©í•´ â€œTID ë¹„íŠ¸ë§µâ€ì„ ë§Œë“ ë‹¤. 
- **ì¹´ë””ë„ë¦¬í‹°(Cardinality)ê°€ ë‚®ì€ ì¹¼ëŸ¼**, ì¦‰ ì¤‘ë³µë˜ëŠ” ê°’ì´ ë§ê³  ê³ ì •ëœ ëª‡ ê°€ì§€ ê°’ë§Œ ê°€ì§€ëŠ” ì¹¼ëŸ¼(ì˜ˆ: ì„±ë³„, ì£¼ì¤‘/ì£¼ë§, Yes/No ë“±)ì— íš¨ê³¼ì 
#### ì‘ë™ ë°©ì‹
1. **ë¹„íŠ¸ë§µ ìƒì„±**
	- ì—¬ëŸ¬ ì¸ë±ìŠ¤ë¥¼ ê°œë³„ì ìœ¼ë¡œ ìŠ¤ìº”í•˜ì—¬ í•´ë‹¹ ì¡°ê±´ì„ ë§Œì¡±í•˜ëŠ” í–‰ë“¤ì´ ìœ„ì¹˜í•œ `í˜ì´ì§€ì˜ ë¹„íŠ¸ë§µ`ì„ ìƒì„±
	- ì´ ë¹„íŠ¸ë§µì—ì„œ ê° ë¹„íŠ¸ëŠ” í…Œì´ë¸”ì˜ ë ˆì½”ë“œ í•˜ë‚˜ë¥¼ ë‚˜íƒ€ë‚´ë©°, í•´ë‹¹ ë ˆì½”ë“œê°€ íŠ¹ì • ê°’ì„ ê°€ì§€ë©´ '1', ì•„ë‹ˆë©´ '0'ìœ¼ë¡œ í‘œì‹œ
	  
2. **ë¹„íŠ¸ë§µ ì—°ì‚°**
	- ì¿¼ë¦¬ ì¡°ê±´ì— ë”°ë¼ ì—¬ëŸ¬ ë¹„íŠ¸ë§µì„ ë¹„íŠ¸ OR, AND, NOT ì—°ì‚° ë“±ì„ í†µí•´ ê²°í•©
3. **ROWID íšë“** 
	- ì—°ì‚°ëœ ìµœì¢… ë¹„íŠ¸ë§µì—ì„œ '1'ë¡œ í‘œì‹œëœ ìœ„ì¹˜(ë¹„íŠ¸)ì— í•´ë‹¹í•˜ëŠ” ë ˆì½”ë“œì˜ ROWIDë“¤ì„ ì¶”ì¶œ
4. **í…Œì´ë¸” ì ‘ê·¼** 
	- ì¶”ì¶œëœ ROWIDë“¤ì„ ì‚¬ìš©í•˜ì—¬ ì‹¤ì œ í…Œì´ë¸”ì—ì„œ í•´ë‹¹ ë ˆì½”ë“œë¥¼ ì½ì–´

> ì´ ìµœì¢… ë¹„íŠ¸ë§µì„ ì‚¬ìš©í•˜ì—¬ í™(Heap)ìœ¼ë¡œ **í•œ ë²ˆë§Œ ì í”„í•˜ì—¬ í•„ìš”í•œ í˜ì´ì§€ë“¤ì„ íš¨ìœ¨ì ìœ¼ë¡œ ê°€ì ¸**ì˜¨ë‹¤. 

#### ì¥ë‹¨ì  

**âœ…ì¥ì ** 
- **ë‚®ì€ ì¹´ë””ë„ë¦¬í‹°ì— íš¨ìœ¨ì ** 
	- ì¤‘ë³µ ê°’ì´ ë§ì€ ì»¬ëŸ¼ì— ëŒ€í•´ì„œëŠ” B-Tree ì¸ë±ìŠ¤ë³´ë‹¤ ë” íš¨ìœ¨ì  ê³µê°„ì‚¬ìš© ë° ì„±ëŠ¥ good
- **ë‹¤ì¤‘ ì»¬ëŸ¼ ì¡°ê±´ì— ê°•ì **
	- ì—¬ëŸ¬ ë¹„íŠ¸ë§µ ì¸ë±ìŠ¤ ì¹¼ëŸ¼ì— ëŒ€í•œ `AND`, `OR` ì¡°ê±´ì„ ë§¤ìš° ë¹ ë¥´ê²Œ ì²˜ë¦¬í•  ìˆ˜ ìˆë‹¤.
- **ëœë¤ I/O ì¤„ì–´ë“ ë‹¤**

> **ì í•©í•œ ê²½ìš°:** ì¤‘ë³µ ê°’ì´ ë§ì€ ì¹¼ëŸ¼ì— ëŒ€í•œ ì¿¼ë¦¬ê°€ ë¹ˆë²ˆí•˜ê³ , ë°ì´í„° ë³€ê²½ì´ ì ì€ ë¶„ì„ ì‹œìŠ¤í…œ

**ğŸ’¢ë‹¨ì ** 
- DMLì— ì·¨ì•½
	- ë°ì´í„° ë³€ê²½ ì‘ì—… ì‹œ ë¹„íŠ¸ë§µ ì „ì²´ë¥¼ ê°±ì‹ í•´ì•¼ í•  ìˆ˜ ìˆê¸°ì— ì„±ëŠ¥ì €í•˜ ë°œìƒ ê°€ëŠ¥ 

#### Bitmap Index Scan â†’ Bitmap Heap Scan : ë‹¨ê³„ë³„ ë‚´ë¶€ íë¦„

1. **Bitmap Index Scan**
    - TIDë¥¼ **ë¹„íŠ¸ë§µ(ìƒëµ ê°€ëŠ¥ = lossy, ì •í™• = exact)** êµ¬ì¡°ì— ê¸°ë¡.
    - ì—¬ëŸ¬ ì¸ë±ìŠ¤ë¥¼ ì“´ë‹¤ë©´ ë¹„íŠ¸ë§µ ê°„ AND/OR ì—°ì‚°ìœ¼ë¡œ ê²°í•©í•˜ì—¬ ìµœì¢… í›„ë³´ ë¸”ë¡ ì§‘í•©ì„ ë§Œë“ ë‹¤.
    - `EXPLAIN` ì¶œë ¥ì—ì„  **`-> Bitmap Index Scan on idx_name`** ë¡œ í‘œì‹œ.
        
2.  **Bitmap Heap Scan**
    - ë¹„íŠ¸ê°€ ì¼œì§„ ë¸”ë¡ì„ **ìˆœì°¨ I/O**ë¡œ ì½ê³ , ë¸”ë¡ ì•ˆì—ì„œ ì¡°ê±´ì„ _Recheck_ í•œë‹¤.
    - **ëœë¤ I/O ê°ì†Œ íš¨ê³¼**
	    - í•„ìš” ì»¬ëŸ¼ë§Œ ê°€ì ¸ì˜¤ë¯€ë¡œ, ë¹„íŠ¸ë§µ ë‹¨ê³„ì—ì„œ ì´ë¯¸ Covering Index ìš”ê±´ì„ ì¶©ì¡±í–ˆë‹¤ë©´ **ì½ê¸°ëŸ‰ì´ ì¶”ê°€ë¡œ ì¤„ì–´ë“ ë‹¤.**

--- 

## ë¹„êµ 
ë¹„íŠ¸ë§µ ì¸ë±ìŠ¤ ìŠ¤ìº”ì€ ë§¤ìš°, ë§¤ìš° ì˜ë¦¬í•œ ë©”ì»¤ë‹ˆì¦˜ 

í…Œì´ë¸”ì„ ì–´ë–»ê²Œ ì¿¼ë¦¬í•˜ì—¬ íŠ¹ì • ë°ì´í„°ë¥¼ ì–´ë–»ê²Œ ê°€ì ¸ì˜¤ëŠ”ì§€ë¥¼ ì•Œì•„ë³¼ ê²ƒ 
ì‹¤ì œ ì¿¼ë¦¬ë¥¼ ì‹¤í–‰í•œë‹¤ê¸°ë³´ë‹¤ëŠ” `EXPLAIN`ì„ ì‚¬ìš©í•˜ì—¬ ì„¤ëª…í•  ê²ƒ 
- ì‹¤ì œ ì„±ëŠ¥ë³´ë‹¤ëŠ”, ì´ ì¿¼ë¦¬ ì‹¤í–‰ ì‹œ ë‚´ë¶€ì ìœ¼ë¡œ PostgreSQLì´ ë¬´ì—‡ì„ í•˜ë ¤ëŠ”ì§€ ì•Œê³  ì‹¶ê¸° ë•Œë¬¸ 

### 1. ì˜µí‹°ë§ˆì´ì €ê°€ 'Bitmap Scan'ì„ ê³ ë¥´ëŠ” ì¡°ê±´ 

> **ì¸ë±ìŠ¤ í•˜ë‚˜ë¡œëŠ” í–‰ ìˆ˜ê°€ ë§ì•„ ëœë¤ I/Oê°€ ê³¼í•´ì§€ê³ , â€˜ì „ì²´ í…Œì´ë¸” ìŠ¤ìº”â€™(Seq Scan)ê¹Œì§€ ê°ˆ ì •ë„ëŠ” ì•„ë‹Œâ€** íšŒìƒ‰ ì§€ëŒ€ì—ì„œ ë“±ì¥
- ì˜ˆìƒ í–‰ ë¹„ìœ¨ì´ 5~20% ë¶€ê·¼ì´ë©´ Index Scanë³´ë‹¤ Bitmap Scanì´ ì´ë“ì´ë¼ê³  íŒë‹¨
- ëœë¤ í˜ì´ì§€ I/O ë¹„ìš© ë§ì´ ì„¤ì • ì‹œ : ëœë¤ ë¸”ë¡ ì ‘ê·¼ì´ ë¹„ì‹¸ê²Œ ì„¤ì •ë ìˆ˜ë¡, â€˜ë¨¼ì € ë¹„íŠ¸ë§µìœ¼ë¡œ í›„ë³´ í˜ì´ì§€ë§Œ ëª¨ì•„ ìˆœì°¨ I/Oâ€™ ì „ëµì„ ì„ í˜¸

```TEXT
          WHERE ì ˆ ì§‘í•©
                 â”‚
      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
      â”‚ ì„ íƒë„ ê·¹ì†Œ (â‰ˆ0â€‰%)  â”‚ ì„ íƒë„ ì¤‘ê°„(â‰ˆ5â€“20â€‰%)
      â”‚      â””â”€> Index Scan â”‚      â””â”€> Bitmap Path
      â”‚                     â”‚
ì„ íƒë„ ë†’ìŒ(>20â€‰%) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
            â””â”€> Seq Scan
```



### 2. ì˜ˆì‹œ 
#### ì„¸íŒ… 
```SQL 
CREATE TABLE grades 
(
    id INTEGER GENERATED ALWAYS AS IDENTITY PRIMARY KEY,
    name TEXT,
    g INTEGER,
    firstname TEXT,
    lastname TEXT,
    address TEXT,
    bio TEXT
)

\d grades: 

          Table "public.grades"
  Column   |  Type   | Collation | Nullable |           Default            
-----------+---------+-----------+----------+------------------------------
 id        | integer |           | not null | generated always as identity
 name      | text    |           |          | 
 g         | integer |           |          | 
 firstname | text    |           |          | 
 lastname  | text    |           |          | 
 address   | text    |           |          | 
 bio       | text    |           |          | 
Indexes:
    "grades_pkey" PRIMARY KEY, btree (id)

```
ì˜ìƒì—ì„œëŠ” gí•„ë“œì— b-treeì¸ë±ìŠ¤ë¥¼ ë„£ì—ˆë‹¤ 
`"g" btree(g) INCLUDE(id)`
```SQL
INSERT INTO grades(name, g, firstname, lastname)
SELECT 
    'í•™ìƒ' || LPAD(Floor(random()*n)::text, 7, '0'),
    Floor(random()*100),
    'ê¹€ì´ë°•',
    'Real Name' || LPAD(n::text, 7, '0')
    
FROM generate_series(1, 1_000_000) AS s(n)
```

#### ì¸ë±ìŠ¤ ìŠ¤ìº” ì¿¼ë¦¬ë“¤ 
â˜‘ì¿¼ë¦¬ 
```SQL 
EXPLAIN SELECT name FROM grades WHERE id = 1000;

QUERY PLAN

Index Scan using grades_pkey on grades  (cost=0.42..8.44 rows=1 width=14)
  Index Cond: (id = 1000)
```
- Index Scanì„ ì‚¬ìš©í•œë‹¤ using PRIMARY KEY 
- nameì€ Heapì˜ì—­ì˜ Tableì— ìˆìœ¼ë‹ˆ ì–´ì¨Œë“  DISKì— ì ‘ê·¼ì€ í•´ì•¼í•œë‹¤. 
- Not : INDEXì™€ HEADì€ ë‹¤ë¥¸ ë°ì´í„° êµ¬ì¡° 


â˜‘ì¿¼ë¦¬ 
```SQL 
EXPLAIN ANALYZE SELECT name FROM grades WHERE id < 1000;

QUERY PLAN

Index Scan using grades_pkey on grades  (cost=0.42..44.69 rows=1044 width=14) (actual time=0.028..0.283 rows=999 loops=1)
  Index Cond: (id < 1000)
Planning Time: 0.227 ms
Execution Time: 0.352 ms
```
- ì´ê²ƒë„ Index Scan ì‚¬ìš© 
- ë°ì´í„°ë² ì´ìŠ¤ëŠ” ì¸ë±ìŠ¤ë¥¼ ì‚¬ìš©í•˜ì—¬ `ID` ì¸ë±ìŠ¤ì— ëŒ€í•´ ì¸ë±ìŠ¤ ìŠ¤ìº”ì„ ìˆ˜í–‰í•˜ê³ , í•˜ë‚˜ì”© ìŠ¤ìº”í•˜ë©´ì„œ 100 ë¯¸ë§Œì¸ ëª¨ë“  ê²ƒì„ ì°¾ê¸°ë¡œ ê²°ì •í•œë‹¤. 
- B-íŠ¸ë¦¬ì—ì„œ ì´ëŠ” ë§¤ìš° ë¹ ë¥´ê²Œ ìˆ˜í–‰ëœë‹¤. 
- ê²°ê³¼ì ìœ¼ë¡œ ì¸ë±ìŠ¤ë¥¼ ì‚¬ìš©. 
- ê·¸ë¦¬ê³  ì°¾ì€ ê° ê°’ì— ëŒ€í•´ í•´ë‹¹ í–‰ì´ ì¡´ì¬í•˜ëŠ” í˜ì´ì§€ë¥¼ ì°¾ê³ , í™ìœ¼ë¡œ ëŒì•„ê°€ì„œ ê·¸ í˜ì´ì§€ë¥¼ ê°€ì ¸ì˜¨ë‹¤.
- ê·¸ í˜ì´ì§€ì—ëŠ” í•˜ë‚˜ ì´ìƒì˜ í–‰ì´ ìˆê³ , ê±°ê¸°ì„œ í•´ë‹¹ ê°’ì„ ê°€ì ¸ì˜µë‹ˆë‹¤. 
- ì´ê²ƒì„ **ëœë¤ ì•¡ì„¸ìŠ¤(random access)** ë¼ê³  ë¶€ë¥¸ë‹¤ ğŸ’¢
	- 99ê°œì˜ ê°’ì— ëŒ€í•´ í˜ì´ì§€ë¡œ ê°€ì„œ í™ìœ¼ë¡œ ê°€ì„œ í–‰ì„ ê°€ì ¸ì™”ìŠµë‹ˆë‹¤.
	- 99ê°œì˜ ëª¨ë“  í–‰ì— ëŒ€í•´ ê·¸ë ‡ê²Œ í–ˆìŠµë‹ˆë‹¤.
	- ë”°ë¼ì„œ ë§ì€ í–‰ì´ ìˆë‹¤ë©´ ì´ê²ƒì´ ëŠë ¤ì§ˆ ìˆ˜ ìˆë‹¤


#### Bitmap Scan ì¿¼ë¦¬ 

`Note : 0 <= g <= 100`
```SQL 
CREATE INDEX ON grades(g);

EXPLAIN SELECT name FROM grades WEHRE g> 95;

Bitmap Heap Scan on grades  (cost=467.34..11298.18 rows=41667 width=14) (actual time=3.376..22.746 rows=39852 loops=1)
  Recheck Cond: (g > 95)
  Heap Blocks: exact=10111
  ->  Bitmap Index Scan on grades_g_idx  (cost=0.00..456.93 rows=41667 width=0) (actual time=2.040..2.040 rows=39852 loops=1)
        Index Cond: (g > 95)
Planning Time: 0.050 ms
Execution Time: 23.885 ms
```

ì™œ Index Scanì´ ì•„ë‹Œ Bitmap Index Scanì„ ì¼ì„ê¹Œ?

- í˜ì´ì§€ë¥¼ ì°¾ì•„ë„ ë°”ë¡œ í…Œì´ë¸”ë¡œ ê°€ì§€ ì•ŠëŠ”ë‹¤.
- ëŒ€ì‹ , set a bit?
- ì˜ˆë¥¼ ë“¤ì–´, page 9ì— ìˆëŠ” rowë¥¼ ì°¾ì•˜ë‹¤ê³  í•˜ì
	- ê·¸ë•Œ tableë¡œ ê°€ëŠ”ê²Œ ì•„ë‹ˆë¼ Bitmapì˜ 9ë²ˆìë¦¬ë¥¼ 1ë¡œ ì±„ìš´ë‹¤.
	- ê²°ê³¼ì ìœ¼ë¡œ, ì •í™•íˆ ê°€ì ¸ì™€ì•¼ í•  í˜ì´ì§€ ìˆ˜ë¥¼ ì•Œê³  ìˆê¸° ë•Œë¬¸ì—, í™ìœ¼ë¡œ í•œ ë²ˆ ì í”„í•˜ì—¬ ì´ ëª¨ë“  í˜ì´ì§€ë¥¼ ê°€ì ¸ì™€ì•¼ í•©ë‹ˆë‹¤. ê·¸ë¦¬ê³  ì´ ëª¨ë“  í˜ì´ì§€ë¥¼ ê°€ì ¸ì˜¤ë©´ ì–´ë–»ê²Œ ë ê¹Œìš”? ê° í˜ì´ì§€ì—ëŠ” í•˜ë‚˜ ì´ìƒì˜ í–‰ì´ ìˆì„ ê²ƒì…ë‹ˆë‹¤. ê·¸ë ‡ì£ ? Postgresê°€ ë°ì´í„°ë¥¼ ì €ì¥í•˜ëŠ” ë°©ì‹ì…ë‹ˆë‹¤.
	- ê·¸ëŸ°ë°, ê·¸ í–‰ë“¤ ì¤‘ ì¼ë¶€ëŠ” `G > 95` ê¸°ì¤€ì„ ë§Œì¡±í•˜ì§€ ì•Šì„ ìˆ˜ë„ ìˆìŠµë‹ˆë‹¤. ê·¸ë˜ì„œ PostgresëŠ” ì¡°ê±´ì„ **ì¬í™•ì¸(recheck)**í•˜ì—¬ í•„í„°ë§ëœ í–‰ë“¤ì„ ì œì™¸í•˜ê³ , í•„í„°ë§ë˜ì§€ ì•Šì€ í–‰ë“¤ë§Œ ë‚¨ê¹ë‹ˆë‹¤. ì´ ê²½ìš°, ìš´ ì¢‹ê²Œë„ ì •í™•í•œ ìˆ˜ì˜ í–‰ì´ í˜ì´ì§€ì— ì •í™•íˆ ë“¤ì–´ë§ì•˜ìŠµë‹ˆë‹¤. ê·¸ë ‡ì£ ? ê·¸ê²ƒì´ ë¹„íŠ¸ë§µ ì¸ë±ìŠ¤ ìŠ¤ìº”

Bitmap Scanì—ì„œ 
bit number = page number


â˜‘Bitmap and Scan 

```SQL 
EXPLAIN ANALYZE SELECT name FROM grades WHERE g > 95 AND id > 5000

QUERY PLAN

Bitmap Heap Scan on grades  (cost=467.29..11402.29 rows=41446 width=14) (actual time=3.647..21.783 rows=39666 loops=1)
  Recheck Cond: (g > 95)
  Filter: (id > 5000)
  Rows Removed by Filter: 186
  Heap Blocks: exact=10111
  ->  Bitmap Index Scan on grades_g_idx  (cost=0.00..456.93 rows=41667 width=0) (actual time=2.318..2.319 rows=39852 loops=1)
        Index Cond: (g > 95)
Planning Time: 0.091 ms
Execution Time: 23.209 ms
```


- bitmapì´ 2ê°œì¸ë° 2ê°œì˜ bitmapì— ê³µí†µëœ í˜ì´ì§€ë§Œ ê°€ì ¸ì˜¤ë©´ ë¼ì„œ êµ¿ì´ë‹¤.
- ì´ë ‡ê²Œ ê³µí†µëœ í˜ì´ì§€ë§Œ ê°€ì ¸ì˜¤ê²Œ ë§ˆì§€ë§‰ì—ëŠ” Bitmap Heap Scanì„ í•œë‹¤
- ì´ê²ƒ ë˜í•œ recheckë¥¼ í•œë‹¤.
	- recheckëŠ” ê·¸ë ‡ê²Œ ë¹„ìš©ì´ ë“¤ì§€ ì•ŠëŠ”ë‹¤. ì™œëƒí•˜ë©´ í˜ì´ì§€ë¥¼ ì¼ë‹¨ ê°€ì ¸ì™”ê¸° ë•Œë¬¸ì— ê·¸ rowë“¤ì´ ë©”ëª¨ë¦¬ì— ì´ë¯¸ ì˜¬ë ¤ì ¸ìˆìŒ. (ex. shared buffer)



